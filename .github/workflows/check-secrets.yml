name: Check Required Secrets

on:
  push:
    branches: [ master, feature/** ]
  pull_request:
    branches: [ master ]

jobs:
  check-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Check NEXTAUTH_SECRET
        run: |
          if [ -z "${{ secrets.NEXTAUTH_SECRET }}" ]; then
            echo "❌ NEXTAUTH_SECRET is not set in repository secrets"
            echo "Please add NEXTAUTH_SECRET to Settings → Secrets → Actions"
            exit 1
          else
            echo "✅ NEXTAUTH_SECRET is configured"
          fi
      - name: Check DATABASE_URL
        run: |
          if [ -z "${{ secrets.DATABASE_URL }}" ]; then
            echo "⚠️  DATABASE_URL is not set (optional for some tests)"
          else
            echo "✅ DATABASE_URL is configured"
          fi
